<div class="max-w-4xl mx-auto py-8 px-4">
  <%= render "shared/breadcrumbs", crumbs: [[@custom_table.name, table_path(@custom_table)], ["Record", table_record_path(@custom_table, @custom_record)]] %>
  <%= render "shared/page_heading", title: "Edit record" %>

  <div class="space-y-8">
    <%= form_with url: table_record_path(@custom_table, @custom_record), method: :patch do |form| %>
      <% @columns.each do |column| %>
        <div class="mb-4">
          <%= label_tag "values_#{column.id}", class: "block text-sm font-medium text-gray-700 mb-1" do %>
            <%= column.name %><% if column.required? %><span class="text-red-500 ml-0.5">*</span><% end %>
          <% end %>
          <%= text_field_tag "values[#{column.id}]", @custom_record.custom_values.detect { |v| v.custom_column_id == column.id }&.value, id: "values_#{column.id}", class: "block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500", required: column.required? %>
        </div>
      <% end %>

      <%= render "shared/button", label: "Save changes", form: form %>
    <% end %>

    <%= render "shared/danger_zone",
      description: "Deleting this record will permanently remove all its values and links.",
      path: table_record_path(@custom_table, @custom_record),
      button_label: "Delete record",
      confirm: "Are you sure you want to delete this record?" %>
  </div>
</div>
