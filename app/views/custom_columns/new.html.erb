<div class="max-w-4xl mx-auto py-8 px-4">
  <%= render "shared/breadcrumbs", crumbs: [[@custom_table.name, table_path(@custom_table)], ["Edit", edit_table_path(@custom_table)]] %>
  <%= render "shared/page_heading", title: "New column" %>

  <%= form_with model: @custom_column, url: table_columns_path(@custom_table), data: { controller: "column-options" } do |form| %>
    <%= render "shared/form_input", form: form, field: :name, label: "Column name", options: { required: true, autofocus: true, placeholder: "e.g. Email, Phone, Status" } %>

    <%= render "shared/dropdown", form: form, field: :column_type, label: "Type", required: true,
      selected: @custom_column.column_type,
      options: [["Text", "text"], ["Number", "number"], ["Email", "email"], ["Boolean", "boolean"], ["Date", "date"], ["Time", "time"], ["Date & Time", "datetime"], ["Select", "select"]],
      input_data: { action: "change->column-options#typeChanged" } %>

    <div data-column-options-target="container" class="hidden">
      <div data-column-options-target="required">
        <%= render "shared/checkbox", form: form, field: :required, label: "Required column" %>
      </div>
      <%= render "shared/checkbox", form: form, field: :show_on_preview, label: "Show on preview" %>

      <div data-column-options-target="selectOptions" class="hidden">
        <div class="mb-4">
          <%= form.label :options_text, "Options (one per line)", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.text_area :options_text, rows: 4, placeholder: "Active\nInactive\nPending", class: "block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500" %>
        </div>
      </div>
    </div>

    <%= render "shared/button", label: "Add column", form: form %>
  <% end %>
</div>
