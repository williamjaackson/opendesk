<% actions = local_assigns.fetch(:actions, []) %>
<% row_actions = actions - [:create] %>

<div class="overflow-x-auto rounded-lg border border-gray-200">
  <% if rows.any? %>
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <% columns.each do |column| %>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              <%= column[:header] %>
            </th>
          <% end %>
          <% if row_actions.any? %>
            <th class="px-6 py-3"></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% rows.each_with_index do |row, i| %>
          <tr class="<%= 'bg-gray-50' if i.odd? %>">
            <% columns.each do |column| %>
              <td class="px-6 py-2.5 text-sm text-gray-900 whitespace-nowrap">
                <% value = column[:accessor].is_a?(Symbol) ? row.public_send(column[:accessor]) : column[:accessor].call(row) %>
                <% if column[:link] %>
                  <%= link_to value, column[:link].call(row), class: "text-blue-600 hover:underline transition-colors" %>
                <% else %>
                  <%= value %>
                <% end %>
              </td>
            <% end %>
            <% if row_actions.any? %>
              <td class="px-6 py-2.5 text-sm whitespace-nowrap text-right">
                <div class="inline-flex items-center gap-3">
                  <% row_actions.each do |action| %>
                    <% case action
                       when :view %>
                      <%= link_to "View", polymorphic_path(row), class: "inline-block px-3 py-1 text-xs font-medium rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 transition-colors" %>
                    <% when :edit %>
                      <%= link_to "Edit", edit_polymorphic_path(row), class: "inline-block px-3 py-1 text-xs font-medium rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 transition-colors" %>
                    <% when :destroy %>
                      <%= button_to "Delete", polymorphic_path(row), method: :delete, class: "px-3 py-1 text-xs font-medium rounded-md border border-red-300 text-red-600 bg-white hover:bg-red-50 transition-colors cursor-pointer", form: { data: { turbo_confirm: "Are you sure?" } } %>
                    <% end %>
                  <% end %>
                </div>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <div class="bg-white px-6 py-12 text-center text-sm text-gray-500">
      No records found.
    </div>
  <% end %>
</div>
